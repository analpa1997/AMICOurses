<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>AMICOurses</title>

    <!-- Bootstrap core CSS -->
    <link href="../BOOTSTRAP/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../CSS/style.css" rel="stylesheet">
    <link href="../CSS/navigationHeader.css" rel="stylesheet">
    
    <!-- JQUERY -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- JS SCRIPTS -->
	<script>
	var numPageDisplay = 0;
	var urlSearch = "";
	$('document').ready(function(){
		$('#textSearch').val("");
		urlSearch = '/api/listCourses/p';
		$.ajax({
			type: 'GET',
			url: urlSearch + (numPageDisplay) + '/',
			data: numPageDisplay,
			success: function(pageData){
				if (pageData.last == true){
					if(pageData.numberOfElements == 0) $('#btnMoreCourses').html('¡No Courses Found!');
					else $('#btnMoreCourses').html('No More courses');
					$('#btnMoreCourses').addClass('disabled');
				}
			},
			error: function(exception){alert(exception.message);}
		})
	})
	
	function showNewest(){
		$('#newbtn').html('<img src="./img/ajax-loader.gif">');
		urlSearch = '/api/listCourses/byNewest/p';
		numPageDisplay = 0;
		$.ajax({
			type: 'GET',
			url: urlSearch + numPageDisplay  + '/',
			data: numPageDisplay,
			success: function(pageData){
				if (pageData.last == true){
					if(pageData.numberOfElements == 0) $('#btnMoreCourses').html('¡No Courses Found!');
					else $('#btnMoreCourses').html('No More courses');
					$('#btnMoreCourses').addClass('disabled');
				}else{
					$('#btnMoreCourses').html('View more courses');
					$('#btnMoreCourses').removeClass('disabled');
				}
				$('#allCourses').html('');
				pageData.content.forEach(function(course){
					$('#allCourses').append('<div class="col-lg-6 col-md-12 col-sm-12 col-12">' + 
							  '<div class="p-3" align=center>' + 
							  '<a id = "link-course" href="./course/' + course.internalName + '.html">' +
							  '<h2 class="display-4">' + course.name + '</h2>' +
							  '</a><p class="lead">' + course.courseDescription + '</p>' + 
							  '<div class="container">'+ 
							  '<a href="../course/' + course.internalName + '.html">'+ 
							  '<img class="img-fluid rounded-circle imgCourse" src="' + course.urlImage + '" alt=" " >'+
		                      '</a>'+
		                      '<div class="mt-3 &nbsp"></div>'+
		                      '<div class = "text-center">Start date: ' + course.startDateString + '</div>'+
		                      '<div class = "text-center">End date: '+ course.endDateString + '</div>'+
		                      '</div></div></div>');
				});
				$('#newbtn').html('Course Type');
			},
			error: function(exception){console.log('ERROR');}
		})
	}
	
	function showByNameLike(){
		$('#searchbtn').html('<img src="./img/ajax-loader.gif">');
		var text = $('#textSearch').val();
		if (text === "") urlSearch = '/api/listCourses/p';
		else urlSearch = '/api/listCourses/partialName/' + text.replace(new RegExp(" ", 'g'), "-").toLowerCase() + '/p';
		numPageDisplay = 0;
		$.ajax({
			type: 'GET',
			url: urlSearch + numPageDisplay  + '/',
			data: numPageDisplay,
			success: function(pageData){
				if (pageData.last == true){
					if(pageData.numberOfElements == 0) $('#btnMoreCourses').html('¡No Courses Found!');
					else $('#btnMoreCourses').html('No More courses');
					$('#btnMoreCourses').addClass('disabled');
				}else{
					$('#btnMoreCourses').html('View more courses');
					$('#btnMoreCourses').removeClass('disabled');
				}
				$('#allCourses').html('');
				pageData.content.forEach(function(course){
					$('#allCourses').append('<div class="col-lg-6 col-md-12 col-sm-12 col-12">' + 
							  '<div class="p-3" align=center>' + 
							  '<a id = "link-course" href="./course/' + course.internalName + '.html">' +
							  '<h2 class="display-4">' + course.name + '</h2>' +
							  '</a><p class="lead">' + course.courseDescription + '</p>' + 
							  '<div class="container">'+ 
							  '<a href="../course/' + course.internalName + '.html">'+ 
							  '<img class="img-fluid rounded-circle imgCourse" src="' + course.urlImage + '" alt=" " >'+
		                      '</a>'+
		                      '<div class="mt-3 &nbsp"></div>'+
		                      '<div class = "text-center">Start date: ' + course.startDateString + '</div>'+
		                      '<div class = "text-center">End date: '+ course.endDateString + '</div>'+
		                      '</div></div></div>');
				});
				$('#searchbtn').html('Search');
			},
			error: function(exception){console.log('ERROR');}
		})
	}
	function showByNumberUsers(){
		$('#trendbtn').html('<img src="./img/ajax-loader.gif">');
		urlSearch = '/api/listCourses/byNumberUsers/p';
		numPageDisplay = 0;
		$.ajax({
			type: 'GET',
			url: urlSearch + numPageDisplay  + '/',
			data: numPageDisplay,
			success: function(pageData){
				if (pageData.last == true){
					if(pageData.numberOfElements == 0) $('#btnMoreCourses').html('¡No Courses Found!');
					else $('#btnMoreCourses').html('No More courses');
					$('#btnMoreCourses').addClass('disabled');
				}else{
					$('#btnMoreCourses').html('View more courses');
					$('#btnMoreCourses').removeClass('disabled');
				}
				$('#allCourses').html('');
				pageData.content.forEach(function(course){
					$('#allCourses').append('<div class="col-lg-6 col-md-12 col-sm-12 col-12">' + 
							  '<div class="p-3" align=center>' + 
							  '<a id = "link-course" href="./course/' + course.internalName + '.html">' +
							  '<h2 class="display-4">' + course.name + '</h2>' +
							  '</a><p class="lead">' + course.courseDescription + '</p>' + 
							  '<div class="container">'+ 
							  '<a href="../course/' + course.internalName + '.html">'+ 
							  '<img class="img-fluid rounded-circle imgCourse" src="' + course.urlImage + '" alt=" " >'+
		                      '</a>'+
		                      '<div class="mt-3 &nbsp"></div>'+
		                      '<div class = "text-center">Start date: ' + course.startDateString + '</div>'+
		                      '<div class = "text-center">End date: '+ course.endDateString + '</div>'+
		                      '</div></div></div>');
				});
				$('#trendbtn').html('Trending');
			},
			error: function(exception){console.log('ERROR');}
		})
	}
	
	function showByType(){
		$('#typebtn').html('<img src="./img/ajax-loader.gif">');
		var type = $('#selectedType option:selected').val();;
		console.log(type);
		urlSearch = '/api/listCourses/type/' + type.replace(new RegExp(" ", 'g'), "-").toLowerCase() + '/p';
		numPageDisplay = 0;
		$.ajax({
			type: 'GET',
			url: urlSearch + numPageDisplay  + '/',
			data: numPageDisplay,
			success: function(pageData){
				if (pageData.last == true){
					if(pageData.numberOfElements == 0) $('#btnMoreCourses').html('¡No Courses Found!');
					else $('#btnMoreCourses').html('No More courses');
					$('#btnMoreCourses').addClass('disabled');
				}else{
					$('#btnMoreCourses').html('View more courses');
					$('#btnMoreCourses').removeClass('disabled');
				}
				$('#allCourses').html('');
				pageData.content.forEach(function(course){
					$('#allCourses').append('<div class="col-lg-6 col-md-12 col-sm-12 col-12">' + 
							  '<div class="p-3" align=center>' + 
							  '<a id = "link-course" href="./course/' + course.internalName + '.html">' +
							  '<h2 class="display-4">' + course.name + '</h2>' +
							  '</a><p class="lead">' + course.courseDescription + '</p>' + 
							  '<div class="container">'+ 
							  '<a href="../course/' + course.internalName + '.html">'+ 
							  '<img class="img-fluid rounded-circle imgCourse" src="' + course.urlImage + '" alt=" " >'+
		                      '</a>'+
		                      '<div class="mt-3 &nbsp"></div>'+
		                      '<div class = "text-center">Start date: ' + course.startDateString + '</div>'+
		                      '<div class = "text-center">End date: '+ course.endDateString + '</div>'+
		                      '</div></div></div>');
				});
				$('#typebtn').html('Course Type');
			},
			error: function(exception){console.log('ERROR');}
		})
	}
	
	function showMore(){
		$('#btnMoreCourses').html('<img src = "./img/ajax-loader.gif">');
		$.ajax({
			type: 'GET',
			url: urlSearch + (numPageDisplay+1)  + '/',
			data: (numPageDisplay+1),
			success: function(pageData){
				if (pageData.last == true){
					if(pageData.numberOfElements == 0) $('#btnMoreCourses').html('¡No Courses Found!');
					else $('#btnMoreCourses').html('No More courses');
					$('#btnMoreCourses').addClass('disabled');
				}else{
					$('#btnMoreCourses').html('View more courses');
				}
				numPageDisplay++;
				pageData.content.forEach(function(course){
					$('#allCourses').append('<div class="col-lg-6 col-md-12 col-sm-12 col-12">' + 
							  '<div class="p-3" align=center>' + 
							  '<a id = "link-course" href="./course/'+ course.internalName + '.html">' +
							  '<h2 class="display-4">' + course.name + '</h2>' +
							  '</a><p class="lead">' + course.courseDescription + '</p>' + 
							  '<div class="container">'+ 
							  '<a href="../course/' + course.internalName + '.html">'+ 
							  '<img class="img-fluid rounded-circle imgCourse" src="' + course.urlImage + '" alt=" " >'+
		                      '</a>'+
		                      '<div class="mt-3 &nbsp"></div>'+
		                      '<div class = "text-center">Start date: ' + course.startDateString + '</div>'+
		                      '<div class = "text-center">End date: '+ course.endDateString + '</div>'+
		                      '</div></div></div>');
				});
			},
			error: function(exception){alert(exception);}
		})
	}
	</script>

</head>

<body>

<!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand" href="./">AMICOURSES</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="{{urlLabelSignUp}}.html">{{labelSignUp}}</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{urlLabelLogIn}}.html">{{labelLogIn}}</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
<!-- End Navigation -->
    
    <!-- Page -->

    <header class="masthead text-center text-white">
        <div class="masthead-content">
            <div class="container">
                <h1 class="masthead-heading mb-0">The best way to learn</h1>
                <h2 class="masthead-subheading mb-0">through our amazing courses</h2>
                <a href="login.html" class="btn btn-primary btn-xl rounded-pill mt-5">get started now</a>
            </div>
        </div>
        <div class="bg-circle-1 bg-circle"></div>
        <div class="bg-circle-2 bg-circle"></div>
        <div class="bg-circle-3 bg-circle"></div>
        <div class="bg-circle-4 bg-circle"></div>
    </header>
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-12 text-center">
                <div class="mt-3 &nbsp"></div>
                <h1 class="h3 mx-auto">Check some of our courses</h1>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-12 text-center">
                <button class="btn btn-primary btn-xl rounded-pill mt-5" id="newbtn" onClick="showNewest();">Newest</button>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-12 text-center">
                <button class="btn btn-primary btn-xl rounded-pill mt-5" id="trendbtn" onClick="showByNumberUsers();">Trending</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-12 col-12">
                <div class="mt-3 &nbsp"></div>
                <nav class="navbar navbar-light bg-faded p-2 ">
                    <span class="col-md-6 col-sm-12 col-12 ">
                    	<input class="form-control mr-sm-2" type="text" placeholder="Name of the course" id = "textSearch">
                    </span>
                    <span class="col-md-6 col-sm-12 col-12 text-center">
                    	<button class="btn btn-primary btn-xl rounded-pill" id="searchbtn" onClick="showByNameLike();">Search</button>
                    </span>
                </nav>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-12  text-center">
            	<div class="mt-4 &nbsp"></div>
	            <div class = "row">
	            	<span class="col-md-6 col-sm-12 col-12 ">
		            	<span class="dropdown">
		                    <form class="form-inline">
		                        <label class="mr-sm-2" for="inlineFormCustomSelect">Type of the course</label>
		                        <select class="custom-select mb-2 mr-sm-2 mb-sm-0" id="selectedType">
				                    {{#typeList}}
				                    <option value="{{.}}">{{.}}</option>
				                    {{/typeList}}
			                 	</select>
		                    </form>
		                </span>
		             </span>
		             <span class="col-md-6 col-sm-12 col-12 text-center ">
		             	<button class="btn btn-primary btn-xl rounded-pill" id = "typebtn" onClick = "showByType();">Course Type</button>
		             </span>
	            </div>
        	</div>
        </div>
    </div>
    <div class="container">
	    <div class="row" id = "allCourses">
			{{#courseList}}
	              <div class="col-lg-6 col-md-12 col-sm-12 col-12">
	                  <div class="p-3" align=center>
	                      <a id = "link-course" href="./course/{{internalName}}.html">
	                      <h2 class="display-4">{{name}}</h2>
	                      </a>
	                      <p class="lead">{{courseDescription}}</p>
	                      <div class="container">
	                          <a href="./course/{{internalName}}.html">
	                      <img class="img-fluid rounded-circle imgCourse" src="{{urlImage}}" alt=" " >
	                      </a>
	                      <div class="mt-3 &nbsp"></div>
	                      <div class = "text-center">Start date: {{startDateString}}</div>
	                      <div class = "text-center">End date: {{endDateString}}</div>
	                      </div>
	                  </div>
	              </div>
		    {{/courseList}}
	     </div>
     </div>

    <section>
        <div class="container text-center">
            <button class="btn btn-primary col-lg-12 my-sm-0 " id="btnMoreCourses" onClick="showMore();">View more courses</button>
        </div>
    </section>



    <!-- Carousel, entities who collaborate in the courses -->

    <section>
        <div class="mt-5 &nbsp"></div>
        <div class="container">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
                <h3 class="text-center">Collaborating entities</h3>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
                <div id="carouselExampleIndicators" class="carousel slide text-center" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                    </ol>
                    <div class="carousel-inner" role="listbox">
                        <div class="carousel-item active ">
                            <img class="d-block img-fluid  text-center" src="../img/05.png" alt="First slide">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block img-fluid" src="../img/urjc.png" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block img-fluid" src="../img/06.png" alt="Third slide">
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
  </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
  </a>
                </div>
            </div>
        </div>

    </section>
    <div class="container"><br></div>
    <!-- Footer -->
    <footer class="py-5 bg-black ">
        <div class="container ">
            <p class="m-0 text-center text-white small ">Copyright &copy; Your Website 2018</p>
        </div>
        <!-- /.container -->
    </footer>

	<!-- JS FILES -->
	
	
	
	
    <!-- Bootstrap core JavaScript -->
    <script src="../BOOTSTRAP/vendor/jquery/jquery.min.js "></script>
    <script src="../BOOTSTRAP/vendor/bootstrap/js/bootstrap.bundle.min.js "></script>
</body>

</html>
